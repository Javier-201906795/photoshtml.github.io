<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Pedir permiso para usar la cámara2</title>
</head>
<body>
    <h1>dfa</h1>
    <video id="video" autoplay>video aqui</video>
    <button onclick="pedirPermiso()">Pedir permiso para usar la cámara</button>
    <button id="tomarfoto">Tomar foto</button>
    <canvas id="canvaselement">
    </canvas>
<script>
    async function pedirPermiso() {
    const videoElement = document.getElementById('video');

    


    try {
        //pide permisos
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        


        //imprimir video
        videoElement.srcObject = stream;
    } catch(error) {
        alert('Error al obtener acceso a la cámara', error);
    }
    }

    document.getElementById("tomarfoto").addEventListener("click", () =>{
        //foto tomada
        const canvas = document.getElementById('canvaselement')
        let ctx = canvas.getContext('2d')
        ctx.drawImage(video,0,0) 
        ctx.drawImage(img);
    })
</script>
</body>
</html>
